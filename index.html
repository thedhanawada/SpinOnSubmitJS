<!DOCTYPE html>
<html>
<head>
  <title>SpinOnSubmitJS Example</title>
  <link rel="stylesheet" type="text/css" href="./main.css">
  <script type="module">
   import { createSpinnerButton } from './spinonsubmit.js';

window.onload = function() {
  const svgSpinner = `
    <svg class="custom-spinner" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
      <circle class="spinner-path" cx="25" cy="25" r="20" stroke="black" fill="none" stroke-width="4"/>
    </svg>
  `;

  createSpinnerButton(
    'submitBtn',
    'myForm',
    function(data) {
      return new Promise(function(resolve, reject) {
        setTimeout(function() {
          var firstName = data.firstName;
          var lastName = data.lastName;
          if (firstName === '' || lastName === '') {
            reject('All fields must be filled!');
          } else {
            alert("Submitted!\nFirst Name: " + firstName + "\nLast Name: " + lastName);
            resolve();
          }
        }, 5000);
      });
    },
    function(error) {
      alert(error);
      console.error(error);
    },
    'red',            // Spinner color
    svgSpinner,       // Spinner template
    'right'           // Spinner position
  );
}
  </script>
</head>
<body>
  
  <h1>SpinOnSubmitJS</h1>

  <h2>About the Library</h2>
  <p>
    SpinOnSubmitJS is a lightweight JavaScript library that simplifies the process of indicating loading state and disabling a submit button during asynchronous actions, such as form submissions. It provides an easy way to add a spinner to the submit button, improving user experience and preventing multiple form submissions. This library is perfect for web developers looking to improve the interactivity of their web pages without writing complex JavaScript code.
  </p>

  <h2>Installation</h2>
  <p>
    SpinOnSubmitJS can be installed via NPM. To add it to your project, simply open your terminal and run the following command:
  </p>
  <pre><code>npm install spinonsubmitjs</code></pre>

  <h2>Usage</h2>
  <p>
    Using SpinOnSubmitJS in your project is straightforward. Follow these steps:
  </p>

  <ol>
    <li>Create a submit button element in your HTML form with a unique ID.</li>
    <li>In your JavaScript file, import the `createSpinnerButton` function from the SpinOnSubmitJS library.</li>
    <li>Call `createSpinnerButton`, passing in the ID of your submit button, the ID of your form, and a callback function that represents the asynchronous action to be performed when the button is clicked. The callback now also receives the form data as its first argument, so you no longer need to manually gather the data.</li>
    <li>You can also pass an error callback as a fourth argument. This function will be called if your main callback throws an error or rejects a promise, allowing you to handle errors gracefully.</li>
    <li>Optionally, you can also pass a fifth argument to `createSpinnerButton` to customize the spinner's color.</li>
    <li>A sixth optional argument can be passed to set the spinner's position to either left (default) or right.</li>
  </ol>

  <h3>Example 1: Basic Usage</h3>

  <pre><code>
    import { createSpinnerButton } from 'spinonsubmitjs';

    createSpinnerButton('submitBtn1', 'myForm1', (data) => {
      return new Promise((resolve) => {
        setTimeout(() => {
          alert(`Submitted!\nFirst Name: ${data.firstName}\nLast Name: ${data.lastName}`);
          resolve();
        }, 2000);
      });
    });
  </code></pre>

  <h3>Example 2: With Error Handling</h3>

  <pre><code>
    import { createSpinnerButton } from 'spinonsubmitjs';

    createSpinnerButton(
      'submitBtn2', 
      'myForm2', 
      (data) => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            if (data.firstName === '') {
              reject('First name is required!');
            } else {
              alert(`Submitted!\nFirst Name: ${data.firstName}\nLast Name: ${data.lastName}`);
              resolve();
            }
          }, 2000);
        });
      }, 
      (error) => {
        alert(`Error: ${error}`);
      }
    );
  </code></pre>

  <h3>Example 3: With Custom Spinner Color</h3>

  <pre><code>
    import { createSpinnerButton } from 'spinonsubmitjs';

    createSpinnerButton(
      'submitBtn3', 
      'myForm3', 
      (data) => {
        return new Promise((resolve) => {
          setTimeout(() => {
            alert(`Submitted!\nFirst Name: ${data.firstName}\nLast Name: ${data.lastName}`);
            resolve();
          }, 2000);
        });
      },
      null,
      'blue' // Spinner color
    );
  </code></pre>

  <h3>Example 4: With Spinner Positioning</h3>

  <pre><code>
    import { createSpinnerButton } from 'spinonsubmitjs';

    createSpinnerButton(
      'submitBtn4', 
      'myForm4', 
      (data) => {
        return new Promise((resolve) => {
          setTimeout(() => {
            alert(`Submitted!\nFirst Name: ${data.firstName}\nLast Name: ${data.lastName}`);
            resolve();
         
          }, 2000);
        });
      },
      null,
      'green', // Spinner color
      'right' // Spinner position
    );
  </code></pre>



  <h2>Example</h2>
  <p>
    Below is a live example of a form using SpinOnSubmitJS. When you click the submit button, the form data is gathered and an alert is displayed with your first and last name. During this time, the submit button is disabled and a spinner is displayed.
  </p>


  <form id="myForm">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required><br><br>
    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required><br><br>
    <button id="submitBtn">Submit</button>
  </form>

  <h2>GitHub Repository</h2>
  <p>
    The source code for SpinOnSubmitJS is available on GitHub. You can view it, download it, fork it, or contribute to it by visiting the following link: 
    <a href="https://github.com/thedhanawada/SpinOnSubmitJS" target="_blank">SpinOnSubmitJS GitHub Repository</a>.
  </p>

  <h2>NPM Package</h2>
  <p>
    SpinOnSubmitJS is also available as an NPM package. You can add it to your project by running `npm install spinonsubmitjs` or visit the NPM package page at 
    <a href="https://www.npmjs.com/package/spinonsubmitjs" target="_blank">SpinOnSubmitJS NPM Package</a> for more information.
  </p>
  
</body>
</html>
