<!DOCTYPE html>
<html>
<head>
  <title>SpinOnSubmitJS Example</title>
  <link rel="stylesheet" type="text/css" href="./main.css">
  <script type="module">
    import { createSpinnerButton } from './spinonsubmit.js';

    window.onload = function() {
      createSpinnerButton(
        'submitBtn',
        'myForm',
        function(data) {
          return new Promise(function(resolve, reject) {
            setTimeout(function() {
              var firstName = data.firstName;
              var lastName = data.lastName;
              if (firstName === '' || lastName === '') {
                reject('All fields must be filled!');
              } else {
                alert("Submitted!\nFirst Name: " + firstName + "\nLast Name: " + lastName);
                resolve();
              }
            }, 2000);
          });
        },
        function(error) {
          alert(error);
          console.error(error);
        },
        'white', // Spinner color
        'right',  // Spinner position
        false     // hideLabelWhileLoading
      );
    }
</script>
</head>
<body>

  <h1>SpinOnSubmitJS</h1>

  <h2>About the Library</h2>
  <p>
    SpinOnSubmitJS is a lightweight JavaScript library that simplifies the process of indicating loading state and disabling a submit button during asynchronous actions, such as form submissions. It provides an easy way to add a spinner to the submit button, improving user experience and preventing multiple form submissions. This library is perfect for web developers looking to improve the interactivity of their web pages without writing complex JavaScript code.
  </p>

  <h2>Installation</h2>
  <p>
    SpinOnSubmitJS can be installed via NPM. To add it to your project, simply open your terminal and run the following command:
  </p>
  <pre><code>npm install spinonsubmitjs</code></pre>

  <h2>Usage</h2>
  <p>
    Incorporating SpinOnSubmitJS into your project is easy. Just follow the subsequent steps:
  </p>

  <ol>
    <li>Create a submit button element within your HTML form and assign a unique ID to it.</li>
    <li>In your JavaScript file, import the `createSpinnerButton` function from the SpinOnSubmitJS module.</li>
    <li>Invoke `createSpinnerButton`, providing the ID of your submit button, the ID of your form, and a callback function representing the asynchronous action to be performed upon button click. The callback function now receives the form data as its first parameter, obviating the need for manual data collection.</li>
    <li>You have the option to pass an error callback as the fourth argument. This function gets called if your main callback throws an error or rejects a promise, enabling you to handle errors seamlessly.</li>
    <li>The fifth argument has now been replaced with an optional `spinnerOptions` object. This object can contain:
      <ul>
        <li><b>spinnerColor:</b> Sets the color of the spinner.</li>
        <li><b>position:</b> Determines the spinner's position, either 'left' or 'right'.</li>
        <li><b>hideLabelWhileLoading:</b> A boolean indicating whether or not to hide the button's label while loading.</li>
      </ul>
      Note that if you want the spinner with default configurations, you don't need to provide the `spinnerOptions` argument.
    </li>
  </ol>

  <p>Here's an example of how you might use `createSpinnerButton`:</p>

<pre>
<code>
createSpinnerButton(
  'submitBtn',
  'myForm',
  function(data) {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        var firstName = data.firstName;
        var lastName = data.lastName;
        if (firstName === '' || lastName === '') {
          reject('All fields must be filled!');
        } else {
          alert("Submitted!\nFirst Name: " + firstName + "\nLast Name: " + lastName);
          resolve();
        }
      }, 2000);
    });
  },
  function(error) {
    alert(error);
    console.error(error);
  },
  {
    spinnerColor: 'white', // Spinner color
    position: 'right',  // Spinner position
    hideLabelWhileLoading: true     // hideLabelWhileLoading
  }
);
</code>
</pre>


  <h2>Example</h2>
  <p>
    Below is a live example of a form using SpinOnSubmitJS. When you click the submit button, the form data is gathered and an alert is displayed with your first and last name. During this time, the submit button is disabled and a spinner is displayed.
  </p>


  <form id="myForm">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" required><br><br>
    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" required><br><br>
    <button id="submitBtn">Submit</button>
  </form>

  <h2>GitHub Repository</h2>
  <p>
    The source code for SpinOnSubmitJS is available on GitHub. You can view it, download it, fork it, or contribute to it by visiting the following link:
    <a href="https://github.com/thedhanawada/SpinOnSubmitJS" target="_blank">SpinOnSubmitJS GitHub Repository</a>.
  </p>

  <h2>NPM Package</h2>
  <p>
    SpinOnSubmitJS is also available as an NPM package. You can add it to your project by running `npm install spinonsubmitjs` or visit the NPM package page at
    <a href="https://www.npmjs.com/package/spinonsubmitjs" target="_blank">SpinOnSubmitJS NPM Package</a> for more information.
  </p>

</body>
</html>
