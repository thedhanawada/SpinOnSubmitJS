<!DOCTYPE html>
<html>
<head>
  <title>SpinOnSubmitJS Example</title>
  <link rel="stylesheet" type="text/css" href="./main.css">
  <script type="module">
    import { createSpinnerButton } from './spinonsubmit.js';

    window.onload = function() {
      const svgSpinner = `
        <svg class="custom-spinner" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
          <circle class="spinner-path" cx="25" cy="25" r="20" stroke="black" fill="none" stroke-width="4"/>
        </svg>
      `;

      createSpinnerButton(
  'submitBtn', 
  'myForm', 
  function(data) {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        var firstName = data.firstName;
        var lastName = data.lastName;
        if (firstName === '' || lastName === '') {
          reject('All fields must be filled!');
        } else {
          alert("Submitted!\nFirst Name: " + firstName + "\nLast Name: " + lastName);
          resolve();
        }
      }, 5000);
    });
  }, 
  function(error) {
    alert(error);
  },
  'red', // spinner color
  `<svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
     <circle cx="25" cy="25" r="20" stroke="black" fill="none" stroke-width="4"/>
   </svg>`,
  'right' // position of spinner
);

    }
  </script>
  <style>
    /* Style the SVG spinner */
    .custom-spinner {
      width: 20px;
      height: 20px;
      animation: spin 2s linear infinite;
    }

    .spinner-path {
      animation: dash 2s ease-in-out infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes dash {
      0% { stroke-dasharray: 1, 150; stroke-dashoffset: 0; }
      50% { stroke-dasharray: 90, 150; stroke-dashoffset: -35; }
      100% { stroke-dasharray: 90, 150; stroke-dashoffset: -124; }
    }
  </style>
</head>
<body>
  <h1>SpinOnSubmitJS</h1>

  <h2>Example</h2>
  <p>
    Below is a live example of a form using SpinOnSubmitJS. When you click the submit button, the form data is gathered and an alert is displayed with your first and last name. During this time, the submit button is disabled and a custom SVG spinner is displayed to the right of the button text.
  </p>

  <form id="myForm">
    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" required><br><br>
    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" required><br><br>
    <button id="submitBtn">Submit</button>
  </form>

  

</body>
</html>
